{"ast":null,"code":"import _defineProperty from\"C:/Users/R9-290/IdeaProjects/React/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/R9-290/IdeaProjects/React/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/R9-290/IdeaProjects/React/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/R9-290/IdeaProjects/React/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/R9-290/IdeaProjects/React/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/*  _____ _______         _                      _\r\n * |_   _|__   __|       | |                    | |\r\n *   | |    | |_ __   ___| |___      _____  _ __| | __  ___ ____\r\n *   | |    | | '_ \\ / _ \\ __\\ \\ /\\ / / _ \\| '__| |/ / / __|_  /\r\n *  _| |_   | | | | |  __/ |_ \\ V  V / (_) | |  |   < | (__ / /\r\n * |_____|  |_|_| |_|\\___|\\__| \\_/\\_/ \\___/|_|  |_|\\_(_)___/___|\r\n *                                _\r\n *              ___ ___ ___ _____|_|_ _ _____\r\n *             | . |  _| -_|     | | | |     |  LICENCE\r\n *             |  _|_| |___|_|_|_|_|___|_|_|_|\r\n *             |_|\r\n *\r\n *   PROGRAMOVÁNÍ  <>  DESIGN  <>  PRÁCE/PODNIKÁNÍ  <>  HW A SW\r\n *\r\n * Tento zdrojový kód je součástí výukových seriálů na\r\n * IT sociální síti WWW.ITNETWORK.CZ\r\n *\r\n * Kód spadá pod licenci prémiového obsahu a vznikl díky podpoře\r\n * našich členů. Je určen pouze pro osobní užití a nesmí být šířen.\r\n * Více informací na http://www.itnetwork.cz/licence\r\n */import React,{useState,useEffect}from\"react\";import{apiDelete,apiGet}from\"../utils/api\";import MovieTable from\"./MovieTable\";import MovieFilter from\"./MovieFilter\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MovieIndex=function MovieIndex(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),directorListState=_useState2[0],setDirectorList=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),actorListState=_useState4[0],setActorList=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),genreListState=_useState6[0],setGenreList=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),moviesState=_useState8[0],setMovies=_useState8[1];var _useState9=useState({directorID:undefined,actorID:undefined,genre:undefined,fromYear:undefined,toYear:undefined,limit:undefined}),_useState10=_slicedToArray(_useState9,2),filterState=_useState10[0],setFilter=_useState10[1];useEffect(function(){apiGet(\"/api/directors\").then(function(data){return setDirectorList(data);});apiGet(\"/api/actors\").then(function(data){return setActorList(data);});apiGet(\"/api/genres\").then(function(data){return setGenreList(data);});apiGet(\"/api/movies\").then(function(data){return setMovies(data);});},[]);var deleteMovie=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(id){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return apiDelete(\"/api/movies/\"+id);case 2:setMovies(moviesState.filter(function(movie){return movie._id!==id;}));case 3:case\"end\":return _context.stop();}},_callee);}));return function deleteMovie(_x){return _ref.apply(this,arguments);};}();var handleChange=function handleChange(e){console.log(e.target.value);// pokud vybereme prázdnou hodnotu (máme definováno jako true/false/'' v komponentách), nastavíme na undefined\nif(e.target.value===\"false\"||e.target.value===\"true\"||e.target.value===\"\"){setFilter(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},e.target.name,undefined));});}else{setFilter(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},e.target.name,e.target.value));});}};var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){var params,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:e.preventDefault();params=filterState;_context2.next=4;return apiGet(\"/api/movies\",params);case 4:data=_context2.sent;setMovies(data);case 6:case\"end\":return _context2.stop();}},_callee2);}));return function handleSubmit(_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Seznam film\\u016F\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(MovieFilter,{handleChange:handleChange,handleSubmit:handleSubmit,directorList:directorListState,actorList:actorListState,genreList:genreListState,filter:filterState,confirm:\"Filtrovat filmy\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(MovieTable,{deleteMovie:deleteMovie,items:moviesState,label:\"Po\\u010Det film\\u016F:\"})]});};export default MovieIndex;","map":{"version":3,"names":["React","useState","useEffect","apiDelete","apiGet","MovieTable","MovieFilter","jsx","_jsx","jsxs","_jsxs","MovieIndex","_useState","_useState2","_slicedToArray","directorListState","setDirectorList","_useState3","_useState4","actorListState","setActorList","_useState5","_useState6","genreListState","setGenreList","_useState7","_useState8","moviesState","setMovies","_useState9","directorID","undefined","actorID","genre","fromYear","toYear","limit","_useState10","filterState","setFilter","then","data","deleteMovie","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","id","wrap","_callee$","_context","prev","next","filter","movie","_id","stop","_x","apply","arguments","handleChange","e","console","log","target","value","prevState","_objectSpread","_defineProperty","name","handleSubmit","_ref2","_callee2","params","_callee2$","_context2","preventDefault","sent","_x2","children","directorList","actorList","genreList","confirm","items","label"],"sources":["C:/Users/R9-290/IdeaProjects/React/client/src/movies/MovieIndex.js"],"sourcesContent":["/*  _____ _______         _                      _\r\n * |_   _|__   __|       | |                    | |\r\n *   | |    | |_ __   ___| |___      _____  _ __| | __  ___ ____\r\n *   | |    | | '_ \\ / _ \\ __\\ \\ /\\ / / _ \\| '__| |/ / / __|_  /\r\n *  _| |_   | | | | |  __/ |_ \\ V  V / (_) | |  |   < | (__ / /\r\n * |_____|  |_|_| |_|\\___|\\__| \\_/\\_/ \\___/|_|  |_|\\_(_)___/___|\r\n *                                _\r\n *              ___ ___ ___ _____|_|_ _ _____\r\n *             | . |  _| -_|     | | | |     |  LICENCE\r\n *             |  _|_| |___|_|_|_|_|___|_|_|_|\r\n *             |_|\r\n *\r\n *   PROGRAMOVÁNÍ  <>  DESIGN  <>  PRÁCE/PODNIKÁNÍ  <>  HW A SW\r\n *\r\n * Tento zdrojový kód je součástí výukových seriálů na\r\n * IT sociální síti WWW.ITNETWORK.CZ\r\n *\r\n * Kód spadá pod licenci prémiového obsahu a vznikl díky podpoře\r\n * našich členů. Je určen pouze pro osobní užití a nesmí být šířen.\r\n * Více informací na http://www.itnetwork.cz/licence\r\n */\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { apiDelete, apiGet } from \"../utils/api\";\r\n\r\nimport MovieTable from \"./MovieTable\";\r\nimport MovieFilter from \"./MovieFilter\";\r\n\r\nconst MovieIndex = () => {\r\n  const [directorListState, setDirectorList] = useState([]);\r\n  const [actorListState, setActorList] = useState([]);\r\n  const [genreListState, setGenreList] = useState([]);\r\n  const [moviesState, setMovies] = useState([]);\r\n  const [filterState, setFilter] = useState({\r\n    directorID: undefined,\r\n    actorID: undefined,\r\n    genre: undefined,\r\n    fromYear: undefined,\r\n    toYear: undefined,\r\n    limit: undefined,\r\n  });\r\n\r\n  useEffect(() => {\r\n    apiGet(\"/api/directors\").then((data) => setDirectorList(data));\r\n    apiGet(\"/api/actors\").then((data) => setActorList(data));\r\n    apiGet(\"/api/genres\").then((data) => setGenreList(data));\r\n    apiGet(\"/api/movies\").then((data) => setMovies(data));\r\n  }, []);\r\n\r\n  const deleteMovie = async (id) => {\r\n    await apiDelete(\"/api/movies/\" + id);\r\n    setMovies(moviesState.filter((movie) => movie._id !== id));\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    console.log(e.target.value);\r\n    // pokud vybereme prázdnou hodnotu (máme definováno jako true/false/'' v komponentách), nastavíme na undefined\r\n    if (\r\n      e.target.value === \"false\" ||\r\n      e.target.value === \"true\" ||\r\n      e.target.value === \"\"\r\n    ) {\r\n      setFilter((prevState) => {\r\n        return { ...prevState, [e.target.name]: undefined };\r\n      });\r\n    } else {\r\n      setFilter((prevState) => {\r\n        return { ...prevState, [e.target.name]: e.target.value };\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const params = filterState;\r\n\r\n    const data = await apiGet(\"/api/movies\", params);\r\n    setMovies(data);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Seznam filmů</h1>\r\n      <hr />\r\n      <MovieFilter\r\n        handleChange={handleChange}\r\n        handleSubmit={handleSubmit}\r\n        directorList={directorListState}\r\n        actorList={actorListState}\r\n        genreList={genreListState}\r\n        filter={filterState}\r\n        confirm=\"Filtrovat filmy\"\r\n      />\r\n      <hr />\r\n      <MovieTable\r\n        deleteMovie={deleteMovie}\r\n        items={moviesState}\r\n        label=\"Počet filmů:\"\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MovieIndex;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}